{% extends "_layouts/cp" %}

{% set title = "Plugin Sales"|t('plugin-sales') %}

{% do view.registerAssetBundle('putyourlightson\\pluginsales\\assets\\ReportsAsset') %}


{% block content %}

    <div class="flex">
        <div class="btn">Export to CSV</div>
        <div class="btn">Export to CSV</div>
    </div>

    {% include 'plugin-sales/_charts/monthly-totals' %}
    {% include 'plugin-sales/_charts/licenses-renewals' %}

    <div class="chart">
        <table id="plugin-sales" class="display fullwidth chart">
            <thead>
                <tr>
                    <th>{{ 'Plugin'|t('plugin-sales') }}</th>
                    <th>{{ 'Edition'|t('plugin-sales') }}</th>
                    <th>{{ 'Type'|t('plugin-sales') }}</th>
                    <th>{{ 'Customer'|t('plugin-sales') }}</th>
                    <th>{{ 'Gross Amount'|t('plugin-sales') }}</th>
                    <th>{{ 'Net Amount'|t('plugin-sales') }}</th>
                    <th>{{ 'Date'|t('plugin-sales') }}</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

{% endblock %}


{% js %}

    $('#plugin-sales').DataTable({
        data: {{ craft.pluginSales.reports.getSalesData()|raw }},
        order: [[ 6, 'desc' ]],
    });

{% endjs %}
